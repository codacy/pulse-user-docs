
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This page includes examples of scripts that we used to quickly populate our own Pulse dashboard with historical data.">
      
      
      
        <link rel="canonical" href="https://docs.pulse.codacy.com/cli/examples/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.0">
    
    
      
        <title>Integration examples - Pulse documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

<!-- Determine analytics provider -->

  


<!-- Set up analytics provider -->

  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-E31MPDGETR"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){n("config","G-E31MPDGETR",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-E31MPDGETR",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>



<!-- Hotjar Tracking Code for app.pulse.codacy.com -->
<script>
  (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:2248401,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
  })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#integration-examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pulse documentation" class="md-header__button md-logo" aria-label="Pulse documentation" data-md-component="logo">
      
  <img src="../../assets/pulse-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pulse documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Integration examples
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://app.pulse.codacy.com/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M280.2 150.2c-7.1-6.4-18.1-8-25.9-4.1s-15.2 12.4-15.2 21l.002 56L152 224c-13.2 0-24 10.8-24 24v16c0 13.3 10.8 24 24 24l88-.9v56c0 9.531 5.656 18.16 14.38 22a24.025 24.025 0 0 0 25.91-4.375l96-88.75C381.2 268.3 384 261.9 384 255.2c-.313-7.781-2.875-13.25-7.844-17.75L280.2 150.2zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm0 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208-93.3 208-208 208z"/></svg>
  </div>
  <div class="md-source__repository">
    Back to the Pulse app
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pulse documentation" class="md-nav__button md-logo" aria-label="Pulse documentation" data-md-component="logo">
      
  <img src="../../assets/pulse-logo.png" alt="logo">

    </a>
    Pulse documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://app.pulse.codacy.com/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M280.2 150.2c-7.1-6.4-18.1-8-25.9-4.1s-15.2 12.4-15.2 21l.002 56L152 224c-13.2 0-24 10.8-24 24v16c0 13.3 10.8 24 24 24l88-.9v56c0 9.531 5.656 18.16 14.38 22a24.025 24.025 0 0 0 25.91-4.375l96-88.75C381.2 268.3 384 261.9 384 255.2c-.313-7.781-2.875-13.25-7.844-17.75L280.2 150.2zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm0 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208-93.3 208-208 208z"/></svg>
  </div>
  <div class="md-source__repository">
    Back to the Pulse app
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Getting started with Pulse
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Calculated metrics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Calculated metrics" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Calculated metrics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/accelerate/" class="md-nav__link">
        Accelerate metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/accelerate-changes/" class="md-nav__link">
        Changes and reviews metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/accelerate-wip/" class="md-nav__link">
        Work in progress metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/lead-cycle-time/" class="md-nav__link">
        Lead and cycle time metrics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          One-click integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="One-click integrations" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          One-click integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../one-click-integrations/github-integration/" class="md-nav__link">
        GitHub integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../one-click-integrations/pagerduty-integration/" class="md-nav__link">
        PagerDuty integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../one-click-integrations/jira-integration/" class="md-nav__link">
        Jira integration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Pulse CLI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pulse CLI" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Pulse CLI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        Using the Pulse CLI
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Integration examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Integration examples
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pushing-historic-changes-and-deployments" class="md-nav__link">
    Pushing historic changes and deployments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pushing-historic-incidents" class="md-nav__link">
    Pushing historic incidents
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://ingestion.pulse.codacy.com/v1/api-docs" class="md-nav__link">
        Ingestion API docs ↗
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="integration-examples">Integration examples<a class="headerlink" href="#integration-examples" title="Permanent link">&para;</a></h1>
<p>This page includes examples of scripts that we used to quickly populate our own Pulse dashboard with historical data.</p>
<p>You can use the examples to understand better how you can integrate the Pulse CLI with your existing workflows, or adapt these examples to populate your Pulse dashboard with historical data from your team.</p>
<h2 id="pushing-historic-changes-and-deployments">Pushing historic changes and deployments<a class="headerlink" href="#pushing-historic-changes-and-deployments" title="Permanent link">&para;</a></h2>
<p>In this example, we used the Pulse CLI to push past changes and deployments from a Git repository into Pulse.</p>
<p>Deployments are identified using semantic version Git tags, and the changes are the commits included in those deployments.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># example.sh</span>

<span class="c1">#!/usr/bin/env bash</span>

<span class="nb">set</span> -e

<span class="nv">CREDENTIALS</span><span class="o">=</span><span class="s2">&quot;xxx&quot;</span>

<span class="nv">workdir</span><span class="o">=</span><span class="k">$(</span>mktemp -d -t website-dora-XXXXXXXXXX<span class="k">)</span>

<span class="k">function</span> clean <span class="o">{</span>
    rm -rf <span class="si">${</span><span class="nv">workdir</span><span class="si">}</span>
<span class="o">}</span>
<span class="nb">trap</span> clean EXIT

git clone git@bitbucket.org:qamine/codacy-website <span class="s2">&quot;</span><span class="nv">$workdir</span><span class="s2">&quot;</span>
<span class="nb">cd</span> <span class="si">${</span><span class="nv">workdir</span><span class="si">}</span>
mapfile -t deployments &lt; &lt;<span class="o">(</span> git <span class="k">for</span>-each-ref --sort<span class="o">=</span>creatordate --format <span class="s1">&#39;%(refname) %(objectname)&#39;</span> refs/tags <span class="p">|</span> grep -E <span class="s1">&#39;^refs\/tags\/[0-9]+\.[0-9]+\.[0-9]+\s&#39;</span> <span class="p">|</span> awk -F<span class="s2">&quot;\/&quot;</span> <span class="s1">&#39;{print $3}&#39;</span> <span class="o">)</span>
<span class="nv">previous_deployment</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nv">current_deployment</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="k">for</span> deployment <span class="k">in</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployments</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">do</span>
    <span class="nv">deployment_id</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>
    <span class="nv">deployment_sha</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
    <span class="nv">deployment_date</span><span class="o">=</span><span class="k">$(</span>git log --format<span class="o">=</span><span class="s2">&quot;%at&quot;</span> <span class="si">${</span><span class="nv">deployment_sha</span><span class="si">}</span> <span class="p">|</span> head -n <span class="m">1</span><span class="k">)</span>

    <span class="c1"># Skip deployments before date</span>
    <span class="c1"># If you are on macOS you need to use $(date -jf &quot;%b %d %Y&quot; &quot;Oct 01 2020&quot; +%s) instead</span>
    <span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">deployment_date</span><span class="si">}</span> -lt <span class="k">$(</span>date -d <span class="s2">&quot;Oct 01 2020&quot;</span> +%s<span class="k">)</span> <span class="o">]</span>
    <span class="k">then</span>
        <span class="k">continue</span>
    <span class="k">fi</span>

    <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="si">${</span><span class="nv">previous_deployment</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]</span>
    <span class="k">then</span>
        <span class="nv">previous_deployment</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_sha</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">continue</span>
    <span class="k">else</span>
        <span class="nv">current_deployment</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_sha</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="nv">deployment_changes</span><span class="o">=()</span>
        mapfile -t deployment_changes &lt; &lt;<span class="o">(</span> git log --format<span class="o">=</span><span class="s2">&quot;%H&quot;</span> <span class="si">${</span><span class="nv">previous_deployment</span><span class="si">}</span>...<span class="si">${</span><span class="nv">current_deployment</span><span class="si">}</span> <span class="o">)</span>

        <span class="k">if</span> <span class="o">[</span> <span class="si">${#</span><span class="nv">deployment_changes</span><span class="p">[@]</span><span class="si">}</span> -gt <span class="m">0</span> <span class="o">]</span>
        <span class="k">then</span>
            <span class="nb">echo</span> <span class="s2">&quot;Pushing deployment </span><span class="si">${</span><span class="nv">deployment_id</span><span class="si">}</span><span class="s2"> with changes [</span><span class="si">${</span><span class="nv">deployment_changes</span><span class="p">[@]</span><span class="si">}</span><span class="s2">]&quot;</span>
            ./pulse-event-cli push deployment <span class="se">\</span>
                --api-key <span class="s2">&quot;</span><span class="si">${</span><span class="nv">CREDENTIALS</span><span class="si">}</span><span class="s2">&quot;</span> <span class="se">\</span>
                --identifier <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_id</span><span class="si">}</span><span class="s2">&quot;</span> <span class="se">\</span>
                --timestamp <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_date</span><span class="si">}</span><span class="s2">&quot;</span> <span class="se">\</span>
                <span class="si">${</span><span class="nv">deployment_changes</span><span class="p">[@]</span><span class="si">}</span>

            <span class="k">for</span> deployment_change <span class="k">in</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_changes</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">do</span>
                <span class="nv">deployment_change_date</span><span class="o">=</span><span class="k">$(</span>git log --format<span class="o">=</span><span class="s2">&quot;%at&quot;</span> <span class="si">${</span><span class="nv">deployment_change</span><span class="si">}</span> --max-count<span class="o">=</span><span class="m">1</span><span class="k">)</span>

                <span class="nb">echo</span> <span class="s2">&quot;Pushing changes </span><span class="si">${</span><span class="nv">deployment_change</span><span class="si">}</span><span class="s2"> with date </span><span class="si">${</span><span class="nv">deployment_change_date</span><span class="si">}</span><span class="s2">&quot;</span>
                ./pulse-event-cli push change <span class="se">\</span>
                    --api-key <span class="s2">&quot;</span><span class="si">${</span><span class="nv">CREDENTIALS</span><span class="si">}</span><span class="s2">&quot;</span> <span class="se">\</span>
                    --identifier <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_change</span><span class="si">}</span><span class="s2">&quot;</span> <span class="se">\</span>
                    --timestamp <span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_change_date</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">done</span>
        <span class="k">fi</span>

        <span class="nv">previous_deployment</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">deployment_sha</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">fi</span>
<span class="k">done</span>
</code></pre></div>
<h2 id="pushing-historic-incidents">Pushing historic incidents<a class="headerlink" href="#pushing-historic-incidents" title="Permanent link">&para;</a></h2>
<p>In this example, we used the Pulse CLI to push past incidents from the Codacy status page API into Pulse.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># incidents.py</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://status.codacy.com/api/incidents&#39;</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">convert_to_unix_epoch</span><span class="p">(</span><span class="n">date_time_str</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date_time_str</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S.</span><span class="si">%f</span><span class="s1">Z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()))</span>

<span class="k">for</span> <span class="n">incident</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">incident</span><span class="p">[</span><span class="s1">&#39;incidentID&#39;</span><span class="p">]</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">convert_to_unix_epoch</span><span class="p">(</span><span class="n">incident</span><span class="p">[</span><span class="s1">&#39;createdAt&#39;</span><span class="p">])</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">convert_to_unix_epoch</span><span class="p">(</span><span class="n">incident</span><span class="p">[</span><span class="s1">&#39;updatedAt&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">incident</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Resolved&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Pushing incident </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s1"> created in </span><span class="si">{</span><span class="n">created</span><span class="si">}</span><span class="s1"> and resolved at </span><span class="si">{</span><span class="n">updated</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">created</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">updated</span><span class="p">)</span>
        <span class="n">bashCmd</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;./pulse-event-cli&quot;</span><span class="p">,</span> <span class="s2">&quot;push&quot;</span><span class="p">,</span> <span class="s2">&quot;incident&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--api-key&quot;</span><span class="p">,</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--identifier&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span>
        <span class="s2">&quot;--timestampCreated&quot;</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span>
        <span class="s2">&quot;--timestampResolved&quot;</span><span class="p">,</span> <span class="n">updated</span>
        <span class="p">]</span>
        <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">bashCmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
        <span class="n">output</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping incident </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> because it was not resolved&quot;</span><span class="p">)</span>
</code></pre></div>


  



              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../cli/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Using the Pulse CLI" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Using the Pulse CLI
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "toc.integrate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>